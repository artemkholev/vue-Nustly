<template>
  <div :class="inputClasses">
    <input 
      :type="isVisible ? 'text' : typeInput"
      :value="modelValue"
      :placeholder="placeholderInput"
      @input="$emit('update:modelValue', ($event.target as HTMLInputElement).value)"
      class="inputText"
    />
    <button v-if="typeInput === 'password'"
      type="button"
      class="visibility"
      @click="setIsVisible"
    >
      <svg v-if="isVisible"
        width="23"
        height="23"
        viewBox="0 0 23 23"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M21.1628 10.9202C20.3732 9.25679 19.4336 7.90015 18.3439 6.85032L17.2011 7.99313C18.133 8.88371 18.9447 10.0488 19.6466 11.4997C17.7779 15.3675 15.1252 17.2048 11.5 17.2048C10.4119 17.2048 9.40961 17.0373 8.4932 16.7021L7.25493 17.9404C8.52771 18.5281 9.94276 18.822 11.5 18.822C15.817 18.822 19.0379 16.5737 21.1628 12.077C21.2482 11.8961 21.2925 11.6986 21.2925 11.4986C21.2925 11.2986 21.2482 11.1011 21.1628 10.9202V10.9202ZM19.7349 3.71836L18.7774 2.75973C18.7607 2.74302 18.7409 2.72977 18.7191 2.72073C18.6973 2.71169 18.6739 2.70703 18.6503 2.70703C18.6267 2.70703 18.6033 2.71169 18.5815 2.72073C18.5596 2.72977 18.5398 2.74302 18.5231 2.75973L16.0666 5.21516C14.7122 4.52337 13.19 4.17747 11.5 4.17747C7.18305 4.17747 3.96215 6.42581 1.83734 10.9225C1.75194 11.1033 1.70764 11.3009 1.70764 11.5009C1.70764 11.7009 1.75194 11.8984 1.83734 12.0792C2.68622 13.8671 3.70819 15.3002 4.90326 16.3785L2.52645 18.7546C2.49277 18.7883 2.47386 18.834 2.47386 18.8816C2.47386 18.9293 2.49277 18.975 2.52645 19.0087L3.4853 19.9675C3.519 20.0012 3.56468 20.0201 3.61232 20.0201C3.65996 20.0201 3.70564 20.0012 3.73934 19.9675L19.7349 3.97262C19.7516 3.95593 19.7649 3.93612 19.7739 3.9143C19.783 3.89249 19.7876 3.86911 19.7876 3.84549C19.7876 3.82188 19.783 3.7985 19.7739 3.77668C19.7649 3.75487 19.7516 3.73505 19.7349 3.71836ZM3.35346 11.4997C5.22446 7.63196 7.8771 5.79466 11.5 5.79466C12.7251 5.79466 13.8389 6.00489 14.8494 6.43232L13.2704 8.01133C12.5226 7.61234 11.6664 7.46426 10.828 7.58894C9.98967 7.71362 9.21358 8.10445 8.61425 8.70378C8.01492 9.30311 7.62408 10.0792 7.4994 10.9176C7.37473 11.7559 7.5228 12.6122 7.92179 13.36L6.0481 15.2336C5.01108 14.3184 4.11713 13.0783 3.35346 11.4997ZM8.89458 11.4997C8.89497 11.1037 8.98878 10.7133 9.1684 10.3603C9.34802 10.0073 9.60837 9.70164 9.9283 9.46817C10.2482 9.23469 10.6187 9.07998 11.0097 9.0166C11.4007 8.95321 11.8011 8.98295 12.1784 9.10338L9.01384 12.2679C8.93453 12.0196 8.89429 11.7604 8.89458 11.4997V11.4997Z"
          fill="#979a9e"
        />
        <path
          d="M11.4103 14.0152C11.3325 14.0152 11.256 14.0117 11.18 14.0047L9.99365 15.1911C10.7072 15.4643 11.4847 15.5251 12.232 15.3659C12.9793 15.2068 13.6646 14.8345 14.2049 14.2942C14.7452 13.7539 15.1174 13.0687 15.2765 12.3214C15.4357 11.574 15.375 10.7966 15.1017 10.083L13.9153 11.2694C13.9223 11.3453 13.9259 11.4219 13.9259 11.4996C13.9261 11.83 13.8611 12.1572 13.7348 12.4625C13.6084 12.7678 13.4231 13.0452 13.1895 13.2788C12.9558 13.5125 12.6784 13.6978 12.3732 13.8241C12.0679 13.9505 11.7407 14.0154 11.4103 14.0152V14.0152Z"
          fill="#979a9e"
        />
      </svg>
      <svg v-else
        width="20"
        height="15"
        viewBox="0 0 20 15"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M1.78396 7.5C1.87504 7.65739 1.99578 7.85796 2.14536 8.08956C2.52955 8.68443 3.09849 9.4755 3.83714 10.2634C5.32964 11.8554 7.41631 13.3333 10.0001 13.3333C12.5838 13.3333 14.6705 11.8554 16.163 10.2634C16.9017 9.4755 17.4706 8.68443 17.8548 8.08956C18.0044 7.85796 18.1251 7.65739 18.2162 7.5C18.1251 7.34261 18.0044 7.14204 17.8548 6.91044C17.4706 6.31557 16.9017 5.5245 16.163 4.73662C14.6705 3.14463 12.5838 1.66667 10.0001 1.66667C7.41631 1.66667 5.32964 3.14463 3.83714 4.73662C3.09849 5.5245 2.52955 6.31557 2.14536 6.91044C1.99578 7.14204 1.87504 7.34261 1.78396 7.5ZM19.1668 7.5C19.9122 7.12732 19.912 7.12704 19.9119 7.12673L19.9105 7.12406L19.9077 7.11837L19.8982 7.09985C19.8902 7.08439 19.879 7.06276 19.8645 7.03537C19.8355 6.98058 19.7935 6.90269 19.7385 6.80499C19.6287 6.6097 19.4669 6.3346 19.2549 6.00623C18.8318 5.35109 18.2028 4.4755 17.3789 3.59672C15.7464 1.85537 13.2497 0 10.0001 0C6.75046 0 4.25377 1.85537 2.62124 3.59672C1.79738 4.4755 1.1684 5.35109 0.745285 6.00623C0.533212 6.3346 0.371496 6.6097 0.261645 6.80499C0.206688 6.90269 0.164618 6.98058 0.135629 7.03537C0.121131 7.06276 0.109897 7.08439 0.101949 7.09985L0.0924923 7.11837L0.0896164 7.12406L0.0886424 7.126C0.0884893 7.1263 0.087978 7.12732 0.833339 7.5L0.087978 7.12732C-0.029326 7.36193 -0.029326 7.63807 0.087978 7.87268L0.833339 7.5C0.087978 7.87268 0.0878249 7.87237 0.087978 7.87268L0.0896164 7.87594L0.0924923 7.88163L0.101949 7.90015C0.109897 7.91561 0.121131 7.93724 0.135629 7.96463C0.164618 8.01942 0.206688 8.09731 0.261645 8.19501C0.371496 8.3903 0.533212 8.6654 0.745285 8.99377C1.1684 9.64891 1.79738 10.5245 2.62124 11.4033C4.25377 13.1446 6.75046 15 10.0001 15C13.2497 15 15.7464 13.1446 17.3789 11.4033C18.2028 10.5245 18.8318 9.64891 19.2549 8.99377C19.4669 8.6654 19.6287 8.3903 19.7385 8.19501C19.7935 8.09731 19.8355 8.01942 19.8645 7.96463C19.879 7.93724 19.8902 7.91561 19.8982 7.90015L19.9077 7.88163L19.9105 7.87594L19.9115 7.874C19.9117 7.8737 19.9122 7.87268 19.1668 7.5ZM19.1668 7.5L19.9122 7.87268C20.0295 7.63807 20.0292 7.36134 19.9119 7.12673L19.1668 7.5Z"
          fill="#979a9e"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M10.0001 5.83317C9.07962 5.83317 8.33343 6.57936 8.33343 7.49984C8.33343 8.42031 9.07962 9.1665 10.0001 9.1665C10.9206 9.1665 11.6668 8.42031 11.6668 7.49984C11.6668 6.57936 10.9206 5.83317 10.0001 5.83317ZM6.66675 7.49984C6.66675 5.65889 8.15914 4.1665 10.0001 4.1665C11.8411 4.1665 13.3335 5.65889 13.3335 7.49984C13.3335 9.34079 11.8411 10.8332 10.0001 10.8332C8.15914 10.8332 6.66675 9.34079 6.66675 7.49984Z"
          fill="#fff"
        />
      </svg>
    </button>
  </div>
</template>

<script setup lang="ts">
import { useThemeStore } from '@/shered/store/theme';
import { storeToRefs } from 'pinia';
import { computed, ref } from 'vue';

const themeStore = useThemeStore();
const { isDarkTheme } = storeToRefs(themeStore);

const inputClasses = computed(() => {
  return { containerInput: true, ['dark-containerInput']: isDarkTheme.value };
});

const isVisible = ref(false);

const setIsVisible = () => {
  isVisible.value = !isVisible.value;
}

defineProps({
  modelValue: {
    type: String,
    default: ''
  },
  typeInput: {
    type: String,
    default: 'text'
  },
  placeholderInput: {
    type: String,
    default: ''
  }
})

defineOptions({
  name: 'input-elem',
})
</script>

<style src="./InputElem.style.scss" lang="scss" scoped></style>